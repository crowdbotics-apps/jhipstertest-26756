{"remainingRequest":"/Users/jesusviloria/Documents/Crowdbotics/APTariffs/misc/apptest_cb/jhipstertest-26756/backend/node_modules/thread-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!/Users/jesusviloria/Documents/Crowdbotics/APTariffs/misc/apptest_cb/jhipstertest-26756/backend/node_modules/ts-loader/index.js??ruleSet[1].rules[0].use[2]!/Users/jesusviloria/Documents/Crowdbotics/APTariffs/misc/apptest_cb/jhipstertest-26756/backend/src/main/webapp/app/config/notification-middleware.ts","dependencies":[{"path":"/Users/jesusviloria/Documents/Crowdbotics/APTariffs/misc/apptest_cb/jhipstertest-26756/backend/src/main/webapp/app/config/notification-middleware.ts","mtime":1621189592416},{"path":"/Users/jesusviloria/Documents/Crowdbotics/APTariffs/misc/apptest_cb/jhipstertest-26756/backend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jesusviloria/Documents/Crowdbotics/APTariffs/misc/apptest_cb/jhipstertest-26756/backend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jesusviloria/Documents/Crowdbotics/APTariffs/misc/apptest_cb/jhipstertest-26756/backend/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgaXNQcm9taXNlLCB0cmFuc2xhdGUgfSBmcm9tICdyZWFjdC1qaGlwc3Rlcic7CmltcG9ydCB7IHRvYXN0IH0gZnJvbSAncmVhY3QtdG9hc3RpZnknOwpjb25zdCBhZGRFcnJvckFsZXJ0ID0gKG1lc3NhZ2UsIGtleSwgZGF0YSkgPT4gewogICAga2V5ID0ga2V5ID8ga2V5IDogbWVzc2FnZTsKICAgIHRvYXN0LmVycm9yKHRyYW5zbGF0ZShrZXksIGRhdGEpKTsKfTsKZXhwb3J0IGRlZmF1bHQgKCkgPT4gbmV4dCA9PiBhY3Rpb24gPT4gewogICAgLy8gSWYgbm90IGEgcHJvbWlzZSwgY29udGludWUgb24KICAgIGlmICghaXNQcm9taXNlKGFjdGlvbi5wYXlsb2FkKSkgewogICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7CiAgICB9CiAgICAvKioKICAgICAqCiAgICAgKiBUaGUgbm90aWZpY2F0aW9uIG1pZGRsZXdhcmUgc2VydmVzIHRvIGRpc3BhdGNoIHRoZSBpbml0aWFsIHBlbmRpbmcgcHJvbWlzZSB0bwogICAgICogdGhlIHByb21pc2UgbWlkZGxld2FyZSwgYnV0IGFkZHMgYSBgdGhlbmAgYW5kIGBjYXRjaC4KICAgICAqLwogICAgcmV0dXJuIG5leHQoYWN0aW9uKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAoYWN0aW9uLm1ldGEgJiYgYWN0aW9uLm1ldGEuc3VjY2Vzc01lc3NhZ2UpIHsKICAgICAgICAgICAgdG9hc3Quc3VjY2VzcyhhY3Rpb24ubWV0YS5zdWNjZXNzTWVzc2FnZSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmFjdGlvbiAmJiByZXNwb25zZS5hY3Rpb24ucGF5bG9hZCAmJiByZXNwb25zZS5hY3Rpb24ucGF5bG9hZC5oZWFkZXJzKSB7CiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSByZXNwb25zZS5hY3Rpb24ucGF5bG9hZC5oZWFkZXJzOwogICAgICAgICAgICBsZXQgYWxlcnQgPSBudWxsOwogICAgICAgICAgICBsZXQgYWxlcnRQYXJhbXMgPSBudWxsOwogICAgICAgICAgICBPYmplY3QuZW50cmllcyhoZWFkZXJzKS5mb3JFYWNoKChbaywgdl0pID0+IHsKICAgICAgICAgICAgICAgIGlmIChrLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJ2FwcC1hbGVydCcpKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQgPSB2OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoay50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCdhcHAtcGFyYW1zJykpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydFBhcmFtcyA9IGRlY29kZVVSSUNvbXBvbmVudCh2LnJlcGxhY2UoL1wrL2csICcgJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKGFsZXJ0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBhbGVydFBhcmFtID0gYWxlcnRQYXJhbXM7CiAgICAgICAgICAgICAgICB0b2FzdC5zdWNjZXNzKHRyYW5zbGF0ZShhbGVydCwgeyBwYXJhbTogYWxlcnRQYXJhbSB9KSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7CiAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgaWYgKGFjdGlvbi5tZXRhICYmIGFjdGlvbi5tZXRhLmVycm9yTWVzc2FnZSkgewogICAgICAgICAgICB0b2FzdC5lcnJvcihhY3Rpb24ubWV0YS5lcnJvck1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChlcnJvciAmJiBlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlOwogICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgaWYgKCEocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgJiYgKGVycm9yLm1lc3NhZ2UgPT09ICcnIHx8IChkYXRhICYmIGRhdGEucGF0aCAmJiBkYXRhLnBhdGguaW5jbHVkZXMoJy9hcGkvYWNjb3VudCcpKSkpKSB7CiAgICAgICAgICAgICAgICBsZXQgaTsKICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzcG9uc2Uuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbiByZWZ1c2VkLCBzZXJ2ZXIgbm90IHJlYWNoYWJsZQogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXJyb3JBbGVydCgnU2VydmVyIG5vdCByZWFjaGFibGUnLCAnZXJyb3Iuc2VydmVyLm5vdC5yZWFjaGFibGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IE9iamVjdC5lbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3JIZWFkZXIgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW50aXR5S2V5ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5mb3JFYWNoKChbaywgdl0pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJ2FwcC1lcnJvcicpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JIZWFkZXIgPSB2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoay50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCdhcHAtcGFyYW1zJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlLZXkgPSB2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9ySGVhZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHlOYW1lID0gdHJhbnNsYXRlKCdnbG9iYWwubWVudS5lbnRpdGllcy4nICsgZW50aXR5S2V5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEVycm9yQWxlcnQoZXJyb3JIZWFkZXIsIGVycm9ySGVhZGVyLCB7IGVudGl0eU5hbWUgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YSAhPT0gJycgJiYgZGF0YS5maWVsZEVycm9ycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSBkYXRhLmZpZWxkRXJyb3JzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGZpZWxkRXJyb3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRFcnJvciA9IGZpZWxkRXJyb3JzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChbJ01pbicsICdNYXgnLCAnRGVjaW1hbE1pbicsICdEZWNpbWFsTWF4J10uaW5jbHVkZXMoZmllbGRFcnJvci5tZXNzYWdlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZEVycm9yLm1lc3NhZ2UgPSAnU2l6ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnZlcnQgJ3NvbWV0aGluZ1sxNF0ub3RoZXJbNF0uaWQnIHRvICdzb21ldGhpbmdbXS5vdGhlcltdLmlkJyBzbyB0cmFuc2xhdGlvbnMgY2FuIGJlIHdyaXR0ZW4gdG8gaXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJ0ZWRGaWVsZCA9IGZpZWxkRXJyb3IuZmllbGQucmVwbGFjZSgvXFtcZCpcXS9nLCAnW10nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZE5hbWUgPSB0cmFuc2xhdGUoYGFwcHRlc3RBcHAuJHtmaWVsZEVycm9yLm9iamVjdE5hbWV9LiR7Y29udmVydGVkRmllbGR9YCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXJyb3JBbGVydChgRXJyb3Igb24gZmllbGQgIiR7ZmllbGROYW1lfSJgLCBgZXJyb3IuJHtmaWVsZEVycm9yLm1lc3NhZ2V9YCwgeyBmaWVsZE5hbWUgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YSAhPT0gJycgJiYgZGF0YS5tZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRFcnJvckFsZXJ0KGRhdGEubWVzc2FnZSwgZGF0YS5tZXNzYWdlLCBkYXRhLnBhcmFtcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRFcnJvckFsZXJ0KGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXNlIDQwNDoKICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXJyb3JBbGVydCgnTm90IGZvdW5kJywgJ2Vycm9yLnVybC5ub3QuZm91bmQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgIT09ICcnICYmIGRhdGEubWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXJyb3JBbGVydChkYXRhLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXJyb3JBbGVydChkYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGVycm9yICYmIGVycm9yLmNvbmZpZyAmJiBlcnJvci5jb25maWcudXJsID09PSAnYXBpL2FjY291bnQnICYmIGVycm9yLmNvbmZpZy5tZXRob2QgPT09ICdnZXQnKSB7CiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KICAgICAgICAgICAgY29uc29sZS5sb2coJ0F1dGhlbnRpY2F0aW9uIEVycm9yOiBUcnlpbmcgdG8gYWNjZXNzIHVybCBhcGkvYWNjb3VudCB3aXRoIEdFVC4nKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoZXJyb3IgJiYgZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICB0b2FzdC5lcnJvcihlcnJvci5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRvYXN0LmVycm9yKCdVbmtub3duIGVycm9yIScpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfSk7Cn07Cg=="},{"version":3,"file":"/Users/jesusviloria/Documents/Crowdbotics/APTariffs/misc/apptest_cb/jhipstertest-26756/backend/src/main/webapp/app/config/notification-middleware.ts","sourceRoot":"","sources":["/Users/jesusviloria/Documents/Crowdbotics/APTariffs/misc/apptest_cb/jhipstertest-26756/backend/src/main/webapp/app/config/notification-middleware.ts"],"names":[],"mappings":"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","sourcesContent":["import { isPromise, translate } from 'react-jhipster';\nimport { toast } from 'react-toastify';\n\nconst addErrorAlert = (message, key?, data?) => {\n  key = key ? key : message;\n  toast.error(translate(key, data));\n};\nexport default () => next => action => {\n  // If not a promise, continue on\n  if (!isPromise(action.payload)) {\n    return next(action);\n  }\n\n  /**\n   *\n   * The notification middleware serves to dispatch the initial pending promise to\n   * the promise middleware, but adds a `then` and `catch.\n   */\n  return next(action)\n    .then(response => {\n      if (action.meta && action.meta.successMessage) {\n        toast.success(action.meta.successMessage);\n      } else if (response && response.action && response.action.payload && response.action.payload.headers) {\n        const headers = response.action.payload.headers;\n        let alert: string | null = null;\n        let alertParams: string | null = null;\n        Object.entries<string>(headers).forEach(([k, v]) => {\n          if (k.toLowerCase().endsWith('app-alert')) {\n            alert = v;\n          } else if (k.toLowerCase().endsWith('app-params')) {\n            alertParams = decodeURIComponent(v.replace(/\\+/g, ' '));\n          }\n        });\n        if (alert) {\n          const alertParam = alertParams;\n          toast.success(translate(alert, { param: alertParam }));\n        }\n      }\n      return Promise.resolve(response);\n    })\n    .catch(error => {\n      if (action.meta && action.meta.errorMessage) {\n        toast.error(action.meta.errorMessage);\n      } else if (error && error.response) {\n        const response = error.response;\n        const data = response.data;\n        if (!(response.status === 401 && (error.message === '' || (data && data.path && data.path.includes('/api/account'))))) {\n          let i;\n          switch (response.status) {\n            // connection refused, server not reachable\n            case 0:\n              addErrorAlert('Server not reachable', 'error.server.not.reachable');\n              break;\n\n            case 400: {\n              const headers = Object.entries<string>(response.headers);\n              let errorHeader: string | null = null;\n              let entityKey: string | null = null;\n              headers.forEach(([k, v]) => {\n                if (k.toLowerCase().endsWith('app-error')) {\n                  errorHeader = v;\n                } else if (k.toLowerCase().endsWith('app-params')) {\n                  entityKey = v;\n                }\n              });\n              if (errorHeader) {\n                const entityName = translate('global.menu.entities.' + entityKey);\n                addErrorAlert(errorHeader, errorHeader, { entityName });\n              } else if (data !== '' && data.fieldErrors) {\n                const fieldErrors = data.fieldErrors;\n                for (i = 0; i < fieldErrors.length; i++) {\n                  const fieldError = fieldErrors[i];\n                  if (['Min', 'Max', 'DecimalMin', 'DecimalMax'].includes(fieldError.message)) {\n                    fieldError.message = 'Size';\n                  }\n                  // convert 'something[14].other[4].id' to 'something[].other[].id' so translations can be written to it\n                  const convertedField = fieldError.field.replace(/\\[\\d*\\]/g, '[]');\n                  const fieldName = translate(`apptestApp.${fieldError.objectName}.${convertedField}`);\n                  addErrorAlert(`Error on field \"${fieldName}\"`, `error.${fieldError.message}`, { fieldName });\n                }\n              } else if (data !== '' && data.message) {\n                addErrorAlert(data.message, data.message, data.params);\n              } else {\n                addErrorAlert(data);\n              }\n              break;\n            }\n            case 404:\n              addErrorAlert('Not found', 'error.url.not.found');\n              break;\n\n            default:\n              if (data !== '' && data.message) {\n                addErrorAlert(data.message);\n              } else {\n                addErrorAlert(data);\n              }\n          }\n        }\n      } else if (error && error.config && error.config.url === 'api/account' && error.config.method === 'get') {\n        /* eslint-disable no-console */\n        console.log('Authentication Error: Trying to access url api/account with GET.');\n      } else if (error && error.message) {\n        toast.error(error.message);\n      } else {\n        toast.error('Unknown error!');\n      }\n      return Promise.reject(error);\n    });\n};\n"]}]}